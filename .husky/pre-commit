#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸŸ  Checking for source code changesâ€¦"

if [[ `git status src --porcelain` ]]; then
  echo "ðŸ”µ Source code changedâ€¦"
else
  echo "ðŸŸ¢ No changes"
  exit 0
fi

echo "ðŸŸ  Compilingâ€¦"

npx ncc build src -o dist

if [[ `git status dist --porcelain` ]]; then
  echo "ðŸŸ  Adding compiled codeâ€¦"
  HUSKY=0 git add dist
  echo "ðŸŸ¢ Done"
else
  echo "ðŸŸ¢ No changes"
fi
